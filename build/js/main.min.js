function run(){isRunning||(isRunning=!0,$("#output").val(""),$("#run").prop("disabled",!0),setTimeout(function(){try{$("#output").val(runCJam($("#code").val(),$("#input").val()))}catch(n){$("#output").val("Syntax error:\n"+n.__gwt$backingJsError.stack)}setTimeout(function(){$("#run").prop("disabled",!1),isRunning=!1},0)},0))}function setCount(){$("#count").html($("#code").val().length)}function permalink(){window.location.hash="#code="+encodeURIComponent($("#code").val())+"&input="+encodeURIComponent($("#input").val())}var isRunning=!1,explain=null;$(function(){var n=window.location.hash.substring(1);if(0===n.indexOf("code=")){var t=n.indexOf("&input=");$("#code").val(decodeURIComponent(t>0?n.slice(5,t):n.slice(5))),$("#input").val(decodeURIComponent(t>0?n.slice(t+7):"")),setCount()}$("#code, #input").keypress(function(n){n.ctrlKey&&13===n.which&&(run(),n.preventDefault())}),$("#code").keyup(function(){setCount()}),$("#code, #input").keyup(function(){permalink()}),$("#permalink").click(permalink),$("#run").click(function(){run()}),(explain=function(){var n=this.value;if(!n)return void $("#explanation").html("<p1>An explanation of your code will be automatically generated as you type.</p1>");try{var t=Explainer.tokenize(n),e=Explainer.explain(t),a=Explainer.toHtml(t,e);$("#explanation").html(a).find("b.level").each(function(){var n=$(this),t="";n.next().find("li").each(function(){var n=$(this).data("value"),e=$(this).data("type");n&&(t+="char"===e?"'"+n:"string"===e?'"'+n+'"':"comment"===e?n+"<br>":n)}),n.html(t)})}catch(i){$("#explanation").html('<p1 style="color: red;">'+i.stack.replace(/ /g,"&nbsp;")+"</p1>")}}).call($("#code").keyup(explain)[0]),$(".ref-select").click(function(){var n=$(this),t=n.data("ref");$(".ref-data").hide(),$('.ref-data[data-ref="'+t+'"]').show()}),$('.ref-data[data-ref="syntax"]').show(),$(".ref-ex").click(function(){var n=$(this),t=n.attr("data-code"),e=n.attr("data-input"),a=$("#code").val(t||"");$("#input").val(e||""),permalink(),setCount(),explain.call(a[0])})});